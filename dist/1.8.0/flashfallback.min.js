/*!
 * Pusher JavaScript Library v1.8.0
 * http://pusherapp.com/
 *
 * Copyright 2010, New Bamboo
 * Released under the MIT licence.
 */
/*
 * This library contains code with the following licences:
 *
 * web_socket.js:
 *
 *   Copyright: Hiroshi Ichikawa <http://gimite.net/en/>
 *   License: New BSD License
 *   Reference: http://dev.w3.org/html5/websockets/
 *   Reference: http://tools.ietf.org/html/draft-hixie-thewebsocketprotocol
 *
 * swfobject.js:
 *
 *   SWFObject v2.2 <http://code.google.com/p/swfobject/>
 *   is released under the MIT License <http://www.opensource.org/licenses/mit-license.php>
 *
 * FABridge.js:
 *
 *   Copyright 2006 Adobe Systems Incorporated
 *
 *   Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"),
 *   to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense,
 *   and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:
 *
 *   The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
 */

var swfobject=function(){function c(){if(!F){try{var a=m.getElementsByTagName("body")[0].appendChild(m.createElement("span"));a.parentNode.removeChild(a)}catch(d){return}F=true;a=K.length;for(var f=0;f<a;f++)K[f]()}}function e(a){if(F)a();else K[K.length]=a}function b(a){if(typeof v.addEventListener!=q)v.addEventListener("load",a,false);else if(typeof m.addEventListener!=q)m.addEventListener("load",a,false);else if(typeof v.attachEvent!=q)ba(v,"onload",a);else if(typeof v.onload=="function"){var d=
v.onload;v.onload=function(){d();a()}}else v.onload=a}function g(){var a=m.getElementsByTagName("body")[0],d=m.createElement(x);d.setAttribute("type",L);var f=a.appendChild(d);if(f){var h=0;(function(){if(typeof f.GetVariable!=q){var i=f.GetVariable("$version");if(i){i=i.split(" ")[1].split(",");j.pv=[parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10)]}}else if(h<10){h++;setTimeout(arguments.callee,10);return}a.removeChild(d);f=null;k()})()}else k()}function k(){var a=B.length;if(a>0)for(var d=
0;d<a;d++){var f=B[d].id,h=B[d].callbackFn,i={success:false,id:f};if(j.pv[0]>0){var o=w(f);if(o)if(M(B[d].swfVersion)&&!(j.wk&&j.wk<312)){G(f,true);if(h){i.success=true;i.ref=p(f);h(i)}}else if(B[d].expressInstall&&t()){i={};i.data=B[d].expressInstall;i.width=o.getAttribute("width")||"0";i.height=o.getAttribute("height")||"0";if(o.getAttribute("class"))i.styleclass=o.getAttribute("class");if(o.getAttribute("align"))i.align=o.getAttribute("align");var n={};o=o.getElementsByTagName("param");for(var r=
o.length,s=0;s<r;s++)if(o[s].getAttribute("name").toLowerCase()!="movie")n[o[s].getAttribute("name")]=o[s].getAttribute("value");l(i,n,f,h)}else{u(o);h&&h(i)}}else{G(f,true);if(h){if((f=p(f))&&typeof f.SetVariable!=q){i.success=true;i.ref=f}h(i)}}}}function p(a){var d=null;if((a=w(a))&&a.nodeName=="OBJECT")if(typeof a.SetVariable!=q)d=a;else if(a=a.getElementsByTagName(x)[0])d=a;return d}function t(){return!N&&M("6.0.65")&&(j.win||j.mac)&&!(j.wk&&j.wk<312)}function l(a,d,f,h){N=true;T=h||null;V={success:false,
id:f};var i=w(f);if(i){if(i.nodeName=="OBJECT"){I=y(i);O=null}else{I=i;O=f}a.id=W;if(typeof a.width==q||!/%$/.test(a.width)&&parseInt(a.width,10)<310)a.width="310";if(typeof a.height==q||!/%$/.test(a.height)&&parseInt(a.height,10)<137)a.height="137";m.title=m.title.slice(0,47)+" - Flash Player Installation";h=j.ie&&j.win?"ActiveX":"PlugIn";h="MMredirectURL="+v.location.toString().replace(/&/g,"%26")+"&MMplayerType="+h+"&MMdoctitle="+m.title;if(typeof d.flashvars!=q)d.flashvars+="&"+h;else d.flashvars=
h;if(j.ie&&j.win&&i.readyState!=4){h=m.createElement("div");f+="SWFObjectNew";h.setAttribute("id",f);i.parentNode.insertBefore(h,i);i.style.display="none";(function(){i.readyState==4?i.parentNode.removeChild(i):setTimeout(arguments.callee,10)})()}C(a,d,f)}}function u(a){if(j.ie&&j.win&&a.readyState!=4){var d=m.createElement("div");a.parentNode.insertBefore(d,a);d.parentNode.replaceChild(y(a),d);a.style.display="none";(function(){a.readyState==4?a.parentNode.removeChild(a):setTimeout(arguments.callee,
10)})()}else a.parentNode.replaceChild(y(a),a)}function y(a){var d=m.createElement("div");if(j.win&&j.ie)d.innerHTML=a.innerHTML;else if(a=a.getElementsByTagName(x)[0])if(a=a.childNodes)for(var f=a.length,h=0;h<f;h++)!(a[h].nodeType==1&&a[h].nodeName=="PARAM")&&a[h].nodeType!=8&&d.appendChild(a[h].cloneNode(true));return d}function C(a,d,f){var h,i=w(f);if(j.wk&&j.wk<312)return h;if(i){if(typeof a.id==q)a.id=f;if(j.ie&&j.win){var o="",n;for(n in a)if(a[n]!=Object.prototype[n])if(n.toLowerCase()==
"data")d.movie=a[n];else if(n.toLowerCase()=="styleclass")o+=' class="'+a[n]+'"';else if(n.toLowerCase()!="classid")o+=" "+n+'="'+a[n]+'"';n="";for(var r in d)if(d[r]!=Object.prototype[r])n+='<param name="'+r+'" value="'+d[r]+'" />';i.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+o+">"+n+"</object>";P[P.length]=a.id;h=w(a.id)}else{r=m.createElement(x);r.setAttribute("type",L);for(var s in a)if(a[s]!=Object.prototype[s])if(s.toLowerCase()=="styleclass")r.setAttribute("class",
a[s]);else s.toLowerCase()!="classid"&&r.setAttribute(s,a[s]);for(o in d)if(d[o]!=Object.prototype[o]&&o.toLowerCase()!="movie"){a=r;n=o;s=d[o];f=m.createElement("param");f.setAttribute("name",n);f.setAttribute("value",s);a.appendChild(f)}i.parentNode.replaceChild(r,i);h=r}}return h}function X(a){var d=w(a);if(d&&d.nodeName=="OBJECT")if(j.ie&&j.win){d.style.display="none";(function(){if(d.readyState==4){var f=w(a);if(f){for(var h in f)if(typeof f[h]=="function")f[h]=null;f.parentNode.removeChild(f)}}else setTimeout(arguments.callee,
10)})()}else d.parentNode.removeChild(d)}function w(a){var d=null;try{d=m.getElementById(a)}catch(f){}return d}function ba(a,d,f){a.attachEvent(d,f);H[H.length]=[a,d,f]}function M(a){var d=j.pv;a=a.split(".");a[0]=parseInt(a[0],10);a[1]=parseInt(a[1],10)||0;a[2]=parseInt(a[2],10)||0;return d[0]>a[0]||d[0]==a[0]&&d[1]>a[1]||d[0]==a[0]&&d[1]==a[1]&&d[2]>=a[2]?true:false}function Y(a,d,f,h){if(!(j.ie&&j.mac)){var i=m.getElementsByTagName("head")[0];if(i){f=f&&typeof f=="string"?f:"screen";if(h)U=z=null;
if(!z||U!=f){h=m.createElement("style");h.setAttribute("type","text/css");h.setAttribute("media",f);z=i.appendChild(h);if(j.ie&&j.win&&typeof m.styleSheets!=q&&m.styleSheets.length>0)z=m.styleSheets[m.styleSheets.length-1];U=f}if(j.ie&&j.win)z&&typeof z.addRule==x&&z.addRule(a,d);else z&&typeof m.createTextNode!=q&&z.appendChild(m.createTextNode(a+" {"+d+"}"))}}}function G(a,d){if(Z){var f=d?"visible":"hidden";if(F&&w(a))w(a).style.visibility=f;else Y("#"+a,"visibility:"+f)}}function $(a){return/[\\\"<>\.;]/.exec(a)!=
null&&typeof encodeURIComponent!=q?encodeURIComponent(a):a}var q="undefined",x="object",L="application/x-shockwave-flash",W="SWFObjectExprInst",v=window,m=document,D=navigator,aa=false,K=[function(){aa?g():k()}],B=[],P=[],H=[],I,O,T,V,F=false,N=false,z,U,Z=true,j=function(){var a=typeof m.getElementById!=q&&typeof m.getElementsByTagName!=q&&typeof m.createElement!=q,d=D.userAgent.toLowerCase(),f=D.platform.toLowerCase(),h=f?/win/.test(f):/win/.test(d);f=f?/mac/.test(f):/mac/.test(d);d=/webkit/.test(d)?
parseFloat(d.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false;var i=!+"\u000b1",o=[0,0,0],n=null;if(typeof D.plugins!=q&&typeof D.plugins["Shockwave Flash"]==x){if((n=D.plugins["Shockwave Flash"].description)&&!(typeof D.mimeTypes!=q&&D.mimeTypes[L]&&!D.mimeTypes[L].enabledPlugin)){aa=true;i=false;n=n.replace(/^.*\s+(\S+\s+\S+$)/,"$1");o[0]=parseInt(n.replace(/^(.*)\..*$/,"$1"),10);o[1]=parseInt(n.replace(/^.*\.(.*)\s.*$/,"$1"),10);o[2]=/[a-zA-Z]/.test(n)?parseInt(n.replace(/^.*[a-zA-Z]+(.*)$/,
"$1"),10):0}}else if(typeof v.ActiveXObject!=q)try{var r=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(r)if(n=r.GetVariable("$version")){i=true;n=n.split(" ")[1].split(",");o=[parseInt(n[0],10),parseInt(n[1],10),parseInt(n[2],10)]}}catch(s){}return{w3:a,pv:o,wk:d,ie:i,win:h,mac:f}}();(function(){if(j.w3){if(typeof m.readyState!=q&&m.readyState=="complete"||typeof m.readyState==q&&(m.getElementsByTagName("body")[0]||m.body))c();if(!F){typeof m.addEventListener!=q&&m.addEventListener("DOMContentLoaded",
c,false);if(j.ie&&j.win){m.attachEvent("onreadystatechange",function(){if(m.readyState=="complete"){m.detachEvent("onreadystatechange",arguments.callee);c()}});v==top&&function(){if(!F){try{m.documentElement.doScroll("left")}catch(a){setTimeout(arguments.callee,0);return}c()}}()}j.wk&&function(){F||(/loaded|complete/.test(m.readyState)?c():setTimeout(arguments.callee,0))}();b(c)}}})();(function(){j.ie&&j.win&&window.attachEvent("onunload",function(){for(var a=H.length,d=0;d<a;d++)H[d][0].detachEvent(H[d][1],
H[d][2]);a=P.length;for(d=0;d<a;d++)X(P[d]);for(var f in j)j[f]=null;j=null;for(var h in swfobject)swfobject[h]=null;swfobject=null})})();return{registerObject:function(a,d,f,h){if(j.w3&&a&&d){var i={};i.id=a;i.swfVersion=d;i.expressInstall=f;i.callbackFn=h;B[B.length]=i;G(a,false)}else h&&h({success:false,id:a})},getObjectById:function(a){if(j.w3)return p(a)},embedSWF:function(a,d,f,h,i,o,n,r,s,J){var Q={success:false,id:d};if(j.w3&&!(j.wk&&j.wk<312)&&a&&d&&f&&h&&i){G(d,false);e(function(){f+="";
h+="";var E={};if(s&&typeof s===x)for(var A in s)E[A]=s[A];E.data=a;E.width=f;E.height=h;A={};if(r&&typeof r===x)for(var R in r)A[R]=r[R];if(n&&typeof n===x)for(var S in n)if(typeof A.flashvars!=q)A.flashvars+="&"+S+"="+n[S];else A.flashvars=S+"="+n[S];if(M(i)){R=C(E,A,d);E.id==d&&G(d,true);Q.success=true;Q.ref=R}else if(o&&t()){E.data=o;l(E,A,d,J);return}else G(d,true);J&&J(Q)})}else J&&J(Q)},switchOffAutoHideShow:function(){Z=false},ua:j,getFlashPlayerVersion:function(){return{major:j.pv[0],minor:j.pv[1],
release:j.pv[2]}},hasFlashPlayerVersion:M,createSWF:function(a,d,f){if(j.w3)return C(a,d,f)},showExpressInstall:function(a,d,f,h){j.w3&&t()&&l(a,d,f,h)},removeSWF:function(a){j.w3&&X(a)},createCSS:function(a,d,f,h){j.w3&&Y(a,d,f,h)},addDomLoadEvent:e,addLoadEvent:b,getQueryParamValue:function(a){var d=m.location.search||m.location.hash;if(d){if(/\?/.test(d))d=d.split("?")[1];if(a==null)return $(d);d=d.split("&");for(var f=0;f<d.length;f++)if(d[f].substring(0,d[f].indexOf("="))==a)return $(d[f].substring(d[f].indexOf("=")+
1))}return""},expressInstallCallback:function(){if(N){var a=w(W);if(a&&I){a.parentNode.replaceChild(I,a);if(O){G(O,true);if(j.ie&&j.win)I.style.display="block"}T&&T(V)}N=false}}}}();function FABridge(c,e){this.target=c;this.remoteTypeCache={};this.remoteInstanceCache={};this.remoteFunctionCache={};this.localFunctionCache={};this.bridgeID=FABridge.nextBridgeID++;this.name=e;this.nextLocalFuncID=0;FABridge.instances[this.name]=this;FABridge.idMap[this.bridgeID]=this;return this}
FABridge.TYPE_ASINSTANCE=1;FABridge.TYPE_ASFUNCTION=2;FABridge.TYPE_JSFUNCTION=3;FABridge.TYPE_ANONYMOUS=4;FABridge.initCallbacks={};FABridge.userTypes={};FABridge.addToUserTypes=function(){for(var c=0;c<arguments.length;c++)FABridge.userTypes[arguments[c]]={typeName:arguments[c],enriched:false}};FABridge.argsToArray=function(c){for(var e=[],b=0;b<c.length;b++)e[b]=c[b];return e};function instanceFactory(c){this.fb_instance_id=c;return this}
function FABridge__invokeJSFunction(c){var e=c[0];c=c.concat();c.shift();return FABridge.extractBridgeFromID(e).invokeLocalFunction(e,c)}FABridge.addInitializationCallback=function(c,e){var b=FABridge.instances[c];if(b!=undefined)e.call(b);else{b=FABridge.initCallbacks[c];if(b==null)FABridge.initCallbacks[c]=b=[];b.push(e)}};
function FABridge__bridgeInitialized(c){var e=document.getElementsByTagName("object"),b=e.length,g=[];if(b>0)for(var k=0;k<b;k++)if(typeof e[k].SetVariable!="undefined")g[g.length]=e[k];b=document.getElementsByTagName("embed");k=b.length;e=[];if(k>0)for(var p=0;p<k;p++)if(typeof b[p].SetVariable!="undefined")e[e.length]=b[p];p=g.length;b=e.length;k="bridgeName="+c;if(p==1&&!b||p==1&&b==1)FABridge.attachBridge(g[0],c);else if(b==1&&!p)FABridge.attachBridge(e[0],c);else{var t=false;if(p>1)for(var l=
0;l<p;l++){for(var u=g[l].childNodes,y=0;y<u.length;y++){var C=u[y];if(C.nodeType==1&&C.tagName.toLowerCase()=="param"&&C.name.toLowerCase()=="flashvars"&&C.value.indexOf(k)>=0){FABridge.attachBridge(g[l],c);t=true;break}}if(t)break}if(!t&&b>1)for(g=0;g<b;g++)if(e[g].attributes.getNamedItem("flashVars").nodeValue.indexOf(k)>=0){FABridge.attachBridge(e[g],c);break}}return true}FABridge.nextBridgeID=0;FABridge.instances={};FABridge.idMap={};FABridge.refCount=0;
FABridge.extractBridgeFromID=function(c){return FABridge.idMap[c>>16]};FABridge.attachBridge=function(c,e){var b=new FABridge(c,e);FABridge[e]=b;var g=FABridge.initCallbacks[e];if(g!=null){for(var k=0;k<g.length;k++)g[k].call(b);delete FABridge.initCallbacks[e]}};FABridge.blockedMethods={toString:true,get:true,set:true,call:true};
FABridge.prototype={root:function(){return this.deserialize(this.target.getRoot())},releaseASObjects:function(){return this.target.releaseASObjects()},releaseNamedASObject:function(c){return typeof c!="object"?false:this.target.releaseNamedASObject(c.fb_instance_id)},create:function(c){return this.deserialize(this.target.create(c))},makeID:function(c){return(this.bridgeID<<16)+c},getPropertyFromAS:function(c,e){if(FABridge.refCount>0)throw Error("You are trying to call recursively into the Flash Player which is not allowed. In most cases the JavaScript setTimeout function, can be used as a workaround.");
else{FABridge.refCount++;retVal=this.target.getPropFromAS(c,e);retVal=this.handleError(retVal);FABridge.refCount--;return retVal}},setPropertyInAS:function(c,e,b){if(FABridge.refCount>0)throw Error("You are trying to call recursively into the Flash Player which is not allowed. In most cases the JavaScript setTimeout function, can be used as a workaround.");else{FABridge.refCount++;retVal=this.target.setPropInAS(c,e,this.serialize(b));retVal=this.handleError(retVal);FABridge.refCount--;return retVal}},
callASFunction:function(c,e){if(FABridge.refCount>0)throw Error("You are trying to call recursively into the Flash Player which is not allowed. In most cases the JavaScript setTimeout function, can be used as a workaround.");else{FABridge.refCount++;retVal=this.target.invokeASFunction(c,this.serialize(e));retVal=this.handleError(retVal);FABridge.refCount--;return retVal}},callASMethod:function(c,e,b){if(FABridge.refCount>0)throw Error("You are trying to call recursively into the Flash Player which is not allowed. In most cases the JavaScript setTimeout function, can be used as a workaround.");
else{FABridge.refCount++;b=this.serialize(b);retVal=this.target.invokeASMethod(c,e,b);retVal=this.handleError(retVal);FABridge.refCount--;return retVal}},invokeLocalFunction:function(c,e){var b,g=this.localFunctionCache[c];if(g!=undefined)b=this.serialize(g.apply(null,this.deserialize(e)));return b},getTypeFromName:function(c){return this.remoteTypeCache[c]},createProxy:function(c,e){var b=this.getTypeFromName(e);instanceFactory.prototype=b;b=new instanceFactory(c);return this.remoteInstanceCache[c]=
b},getProxy:function(c){return this.remoteInstanceCache[c]},addTypeDataToCache:function(c){for(var e=new ASProxy(this,c.name),b=c.accessors,g=0;g<b.length;g++)this.addPropertyToType(e,b[g]);c=c.methods;for(g=0;g<c.length;g++)FABridge.blockedMethods[c[g]]==undefined&&this.addMethodToType(e,c[g]);return this.remoteTypeCache[e.typeName]=e},addPropertyToType:function(c,e){var b=e.charAt(0),g;if(b>="a"&&b<="z"){g="get"+b.toUpperCase()+e.substr(1);b="set"+b.toUpperCase()+e.substr(1)}else{g="get"+e;b="set"+
e}c[b]=function(k){this.bridge.setPropertyInAS(this.fb_instance_id,e,k)};c[g]=function(){return this.bridge.deserialize(this.bridge.getPropertyFromAS(this.fb_instance_id,e))}},addMethodToType:function(c,e){c[e]=function(){return this.bridge.deserialize(this.bridge.callASMethod(this.fb_instance_id,e,FABridge.argsToArray(arguments)))}},getFunctionProxy:function(c){var e=this;if(this.remoteFunctionCache[c]==null)this.remoteFunctionCache[c]=function(){e.callASFunction(c,FABridge.argsToArray(arguments))};
return this.remoteFunctionCache[c]},getFunctionID:function(c){if(c.__bridge_id__==undefined){c.__bridge_id__=this.makeID(this.nextLocalFuncID++);this.localFunctionCache[c.__bridge_id__]=c}return c.__bridge_id__},serialize:function(c){var e={},b=typeof c;if(b=="number"||b=="string"||b=="boolean"||b==null||b==undefined)e=c;else if(c instanceof Array){e=[];for(b=0;b<c.length;b++)e[b]=this.serialize(c[b])}else if(b=="function"){e.type=FABridge.TYPE_JSFUNCTION;e.value=this.getFunctionID(c)}else if(c instanceof
ASProxy){e.type=FABridge.TYPE_ASINSTANCE;e.value=c.fb_instance_id}else{e.type=FABridge.TYPE_ANONYMOUS;e.value=c}return e},deserialize:function(c){var e,b=typeof c;if(b=="number"||b=="string"||b=="boolean"||c==null||c==undefined)e=this.handleError(c);else if(c instanceof Array){e=[];for(b=0;b<c.length;b++)e[b]=this.deserialize(c[b])}else if(b=="object"){for(b=0;b<c.newTypes.length;b++)this.addTypeDataToCache(c.newTypes[b]);for(var g in c.newRefs)this.createProxy(g,c.newRefs[g]);if(c.type==FABridge.TYPE_PRIMITIVE)e=
c.value;else if(c.type==FABridge.TYPE_ASFUNCTION)e=this.getFunctionProxy(c.value);else if(c.type==FABridge.TYPE_ASINSTANCE)e=this.getProxy(c.value);else if(c.type==FABridge.TYPE_ANONYMOUS)e=c.value}return e},addRef:function(c){this.target.incRef(c.fb_instance_id)},release:function(c){this.target.releaseRef(c.fb_instance_id)},handleError:function(c){if(typeof c=="string"&&c.indexOf("__FLASHERROR")==0){c=c.split("||");FABridge.refCount>0&&FABridge.refCount--;throw Error(c[1]);}return c}};
ASProxy=function(c,e){this.bridge=c;this.typeName=e;return this};ASProxy.prototype={get:function(c){return this.bridge.deserialize(this.bridge.getPropertyFromAS(this.fb_instance_id,c))},set:function(c,e){this.bridge.setPropertyInAS(this.fb_instance_id,c,e)},call:function(c,e){this.bridge.callASMethod(this.fb_instance_id,c,e)},addRef:function(){this.bridge.addRef(this)},release:function(){this.bridge.release(this)}};
(function(){function c(){}if(!window.WebSocket){var e=window.console;if(!e||!e.log||!e.error)e={log:function(){},error:function(){}};if(swfobject.hasFlashPlayerVersion("9.0.0")){location.protocol=="file:"&&e.error("WARNING: web-socket-js doesn't work in file:///... URL unless you set Flash Security Settings properly. Open the page via Web server i.e. http://...");WebSocket=function(b,g,k,p,t){var l=this;l.readyState=WebSocket.CONNECTING;l.bufferedAmount=0;setTimeout(function(){WebSocket.__addTask(function(){l.__createFlash(b,
g,k,p,t)})},1)};WebSocket.prototype.__createFlash=function(b,g,k,p,t){var l=this;l.__flash=WebSocket.__flash.create(b,g,k||null,p||0,t||null);l.__flash.addEventListener("open",function(){try{l.readyState=l.__flash.getReadyState();l.__timer&&clearInterval(l.__timer);if(window.opera)l.__timer=setInterval(function(){l.__handleMessages()},500);l.onopen&&l.onopen()}catch(u){e.error(u.toString())}});l.__flash.addEventListener("close",function(){try{l.readyState=l.__flash.getReadyState();l.__timer&&clearInterval(l.__timer);
l.onclose&&l.onclose()}catch(u){e.error(u.toString())}});l.__flash.addEventListener("message",function(){try{l.__handleMessages()}catch(u){e.error(u.toString())}});l.__flash.addEventListener("error",function(){try{l.__timer&&clearInterval(l.__timer);l.onerror&&l.onerror()}catch(u){e.error(u.toString())}});l.__flash.addEventListener("stateChange",function(u){try{l.readyState=l.__flash.getReadyState();l.bufferedAmount=u.getBufferedAmount()}catch(y){e.error(y.toString())}})};WebSocket.prototype.send=
function(b){if(this.__flash)this.readyState=this.__flash.getReadyState();if(!this.__flash||this.readyState==WebSocket.CONNECTING)throw"INVALID_STATE_ERR: Web Socket connection has not been established";b=this.__flash.send(encodeURIComponent(b));if(b<0)return true;else{this.bufferedAmount=b;return false}};WebSocket.prototype.close=function(){if(this.__flash){this.readyState=this.__flash.getReadyState();if(!(this.readyState==WebSocket.CLOSED||this.readyState==WebSocket.CLOSING)){this.__flash.close();
this.readyState=WebSocket.CLOSED;this.__timer&&clearInterval(this.__timer);this.onclose&&setTimeout(this.onclose,1)}}};WebSocket.prototype.addEventListener=function(b,g){if(!("__events"in this))this.__events={};if(!(b in this.__events)){this.__events[b]=[];if("function"==typeof this["on"+b]){this.__events[b].defaultHandler=this["on"+b];this["on"+b]=this.__createEventHandler(this,b)}}this.__events[b].push(g)};WebSocket.prototype.removeEventListener=function(b,g){if(!("__events"in this))this.__events=
{};if(b in this.__events)for(var k=this.__events.length;k>-1;--k)if(g===this.__events[b][k]){this.__events[b].splice(k,1);break}};WebSocket.prototype.dispatchEvent=function(b){if(!("__events"in this))throw"UNSPECIFIED_EVENT_TYPE_ERR";if(!(b.type in this.__events))throw"UNSPECIFIED_EVENT_TYPE_ERR";for(var g=0,k=this.__events[b.type].length;g<k;++g){this.__events[b.type][g](b);if(b.cancelBubble)break}false!==b.returnValue&&"function"==typeof this.__events[b.type].defaultHandler&&this.__events[b.type].defaultHandler(b)};
WebSocket.prototype.__handleMessages=function(){for(var b=this.__flash.readSocketData(),g=0;g<b.length;g++){var k=decodeURIComponent(b[g]);try{if(this.onmessage){var p;if(window.MessageEvent&&!window.opera){p=document.createEvent("MessageEvent");p.initMessageEvent("message",false,false,k,null,null,window,null)}else p={data:k};this.onmessage(p)}}catch(t){e.error(t.toString())}}};WebSocket.prototype.__createEventHandler=function(b,g){return function(k){var p=new c;p.initEvent(g,true,true);p.target=
p.currentTarget=b;for(var t in k)p[t]=k[t];b.dispatchEvent(p,arguments)}};c.prototype.cancelable=true;c.prototype.cancelBubble=false;c.prototype.preventDefault=function(){if(this.cancelable)this.returnValue=false};c.prototype.stopPropagation=function(){this.cancelBubble=true};c.prototype.initEvent=function(b,g,k){this.type=b;this.cancelable=k;this.timeStamp=new Date};WebSocket.CONNECTING=0;WebSocket.OPEN=1;WebSocket.CLOSING=2;WebSocket.CLOSED=3;WebSocket.__tasks=[];WebSocket.loadFlashPolicyFile=function(b){WebSocket.__addTask(function(){WebSocket.__flash.loadManualPolicyFile(b)})};
WebSocket.__initialize=function(){if(WebSocket.__swfLocation)window.WEB_SOCKET_SWF_LOCATION=WebSocket.__swfLocation;if(window.WEB_SOCKET_SWF_LOCATION){var b=document.createElement("div");b.id="webSocketContainer";b.style.position="absolute";if(WebSocket.__isFlashLite()){b.style.left="0px";b.style.top="0px"}else{b.style.left="-100px";b.style.top="-100px"}var g=document.createElement("div");g.id="webSocketFlash";b.appendChild(g);document.body.appendChild(b);swfobject.embedSWF(WEB_SOCKET_SWF_LOCATION,
"webSocketFlash","1","1","9.0.0",null,{bridgeName:"webSocket"},{hasPriority:true,allowScriptAccess:"always"},null,function(k){k.success||e.error("[WebSocket] swfobject.embedSWF failed")});FABridge.addInitializationCallback("webSocket",function(){try{WebSocket.__flash=FABridge.webSocket.root();WebSocket.__flash.setCallerUrl(location.href);WebSocket.__flash.setDebug(!!window.WEB_SOCKET_DEBUG);for(var k=0;k<WebSocket.__tasks.length;++k)WebSocket.__tasks[k]();WebSocket.__tasks=[]}catch(p){e.error("[WebSocket] "+
p.toString())}})}else e.error("[WebSocket] set WEB_SOCKET_SWF_LOCATION to location of WebSocketMain.swf")};WebSocket.__addTask=function(b){WebSocket.__flash?b():WebSocket.__tasks.push(b)};WebSocket.__isFlashLite=function(){if(!window.navigator||!window.navigator.mimeTypes)return false;var b=window.navigator.mimeTypes["application/x-shockwave-flash"];if(!b||!b.enabledPlugin||!b.enabledPlugin.filename)return false;return b.enabledPlugin.filename.match(/flashlite/i)?true:false};window.webSocketLog=function(b){e.log(decodeURIComponent(b))};
window.webSocketError=function(b){e.error(decodeURIComponent(b))};window.WEB_SOCKET_DISABLE_AUTO_INITIALIZATION||(window.addEventListener?window.addEventListener("load",WebSocket.__initialize,false):window.attachEvent("onload",WebSocket.__initialize))}else e.error("Flash Player is not installed.")}})();
